name: HubSpot Deploy
author: HubSpot
description: Publish website files to your HubSpot CMS account
branding:
  icon: 'upload-cloud'
  color: 'orange'
inputs:
  src_dir:
    description: Directory in project to be published
    required: true
  dest_dir:
    description: Directory in account which project will be published to
    require: true
runs:
  using: "composite"
  steps:
    - uses: actions/checkout@v1
    - name: Use Node.js
      uses: actions/setup-node@v1
      with:
        node-version: 10.x
    - name: Install NPM deps
      run: |
          npm install
    - name: Deploy
      env:
        HUBSPOT_PORTAL_ID: ${{ secrets.HubSpotPortalId }}
        HUBSPOT_PERSONAL_ACCESS_KEY: ${{ secrets.HubSpotPersonalAccessKey }}
      run: |
        npx hs upload ${{ inputs.INPUT_SRC_DIR }} ${{ inputs.INPUT_SRC_DIR }} --use-env
